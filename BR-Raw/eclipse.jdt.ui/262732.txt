Bug 262732 – [compare] [common navigator] duplicate changes in model compare (folder and source folder)
I20090127-0100
When I was making a fix for bug 247943 I noticed couple of Internal Errors in the log.
Steps were more less like this:
1.
Checkout org.eclipse.compare.tests
2.
Open Sync perspective and sync entire workspace, all models => no changes
3.
Modify LineReaderTest.java
4.
Switch to Resource perspective
5.
Move src/org/eclipse/compare/tests/linereaderdata to linereaderdata
6.
Go back to Sync view, navigate through changes
=> You should see duplicated entry for LineReaderTest.java, not sure if this is wrong though
=> In the error log you should see bunch of Internal Errors:
Starting with:
org.eclipse.compare.tests.linereaderdata [in src [in org.eclipse.compare.tests]] does not exist
Next, couple of:
Java Model Exception: Java Model Status [org.eclipse.compare.tests.linereaderdata [in src [in org.eclipse.compare.tests]] does not exist]
at org.eclipse.jdt.internal.core.JavaElement.newJavaModelException(JavaElement.java:502)
at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:246)
at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:515)
at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:252)
at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:238)
at org.eclipse.jdt.internal.core.PackageFragment.getNonJavaResources(PackageFragment.java:300)
at org.eclipse.jdt.internal.corext.util.JavaElementResourceMapping.getPackageFragmentTraversals(JavaElementResourceMapping.java:196)
at org.eclipse.jdt.internal.corext.util.JavaElementResourceMapping.access$1(JavaElementResourceMapping.java:189)
at org.eclipse.jdt.internal.corext.util.JavaElementResourceMapping$PackageFragmentResourceMapping.getTraversals(JavaElementResourceMapping.java:184)
at org.eclipse.jdt.internal.ui.model.JavaSynchronizationContentProvider.getResourceTraversals(JavaSynchronizationContentProvider.java:126)
at org.eclipse.jdt.internal.ui.model.JavaSynchronizationContentProvider.getDiffs(JavaSynchronizationContentProvider.java:93)
at org.eclipse.jdt.internal.ui.model.JavaSynchronizationLabelProvider.getDiff(JavaSynchronizationLabelProvider.java:99)
at org.eclipse.team.ui.synchronize.AbstractSynchronizeLabelProvider.decorateImage(AbstractSynchronizeLabelProvider.java:79)
at org.eclipse.team.ui.synchronize.AbstractSynchronizeLabelProvider.getImage(AbstractSynchronizeLabelProvider.java:51)
at org.eclipse.team.ui.mapping.SynchronizationLabelProvider.getImage(SynchronizationLabelProvider.java:115)
at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.findImage(NavigatorContentServiceLabelProvider.java:159)
at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.getImage(NavigatorContentServiceLabelProvider.java:100)
at org.eclipse.ui.internal.navigator.NavigatorDecoratingLabelProvider$StyledLabelProviderAdapter.getImage(NavigatorDecoratingLabelProvider.java:58)
at org.eclipse.jface.viewers.DelegatingStyledCellLabelProvider.getImage(DelegatingStyledCellLabelProvider.java:184)
at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider.getImage(DecoratingStyledCellLabelProvider.java:167)
at org.eclipse.jface.viewers.DelegatingStyledCellLabelProvider.update(DelegatingStyledCellLabelProvider.java:118)
at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider.update(DecoratingStyledCellLabelProvider.java:134)
at org.eclipse.jface.viewers.ViewerColumn.refresh(ViewerColumn.java:145)
at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:932)
at org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run(AbstractTreeViewer.java:102)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
at org.eclipse.core.runtime.Platform.run(Platform.java:874)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:1012)
at org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:475)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
at org.eclipse.core.runtime.Platform.run(Platform.java:874)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:2096)
at org.eclipse.jface.viewers.AbstractTreeViewer.createTreeItem(AbstractTreeViewer.java:827)
at org.eclipse.ui.navigator.CommonViewer.createTreeItem(CommonViewer.java:168)
at org.eclipse.jface.viewers.AbstractTreeViewer$1.run(AbstractTreeViewer.java:802)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.jface.viewers.AbstractTreeViewer.createChildren(AbstractTreeViewer.java:776)
at org.eclipse.jface.viewers.TreeViewer.createChildren(TreeViewer.java:642)
at org.eclipse.jface.viewers.AbstractTreeViewer.handleTreeExpand(AbstractTreeViewer.java:1442)
at org.eclipse.jface.viewers.TreeViewer.handleTreeExpand(TreeViewer.java:935)
at org.eclipse.jface.viewers.AbstractTreeViewer$4.treeExpanded(AbstractTreeViewer.java:1453)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:126)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1027)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1012)
at org.eclipse.swt.widgets.Tree.wmNotifyChild(Tree.java:7349)
at org.eclipse.swt.widgets.Control.wmNotify(Control.java:4843)
at org.eclipse.swt.widgets.Composite.wmNotify(Composite.java:1755)
at org.eclipse.swt.widgets.Control.WM_NOTIFY(Control.java:4473)
at org.eclipse.swt.widgets.Control.windowProc(Control.java:3966)
at org.eclipse.swt.widgets.Display.windowProc(Display.java:4584)
at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:2296)
at org.eclipse.swt.widgets.Tree.callWindowProc(Tree.java:1529)
at org.eclipse.swt.widgets.Tree.WM_LBUTTONDOWN(Tree.java:6280)
at org.eclipse.swt.widgets.Control.windowProc(Control.java:3947)
at org.eclipse.swt.widgets.Tree.windowProc(Tree.java:5821)
at org.eclipse.swt.widgets.Display.windowProc(Display.java:4597)
at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2393)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3468)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2388)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2352)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2204)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:499)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:333)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:492)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:550)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:505)
at org.eclipse.equinox.launcher.Main.run(Main.java:1264)
and:
Java Model Exception: Java Model Status [org.eclipse.compare.tests.linereaderdata [in src [in org.eclipse.compare.tests]] does not exist]
at org.eclipse.jdt.internal.core.JavaElement.newJavaModelException(JavaElement.java:502)
at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:246)
at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:515)
at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:252)
at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:238)
at org.eclipse.jdt.internal.core.PackageFragment.getNonJavaResources(PackageFragment.java:300)
at org.eclipse.jdt.internal.corext.util.JavaElementResourceMapping.getPackageFragmentTraversals(JavaElementResourceMapping.java:196)
at org.eclipse.jdt.internal.corext.util.JavaElementResourceMapping.access$1(JavaElementResourceMapping.java:189)
at org.eclipse.jdt.internal.corext.util.JavaElementResourceMapping$PackageFragmentResourceMapping.getTraversals(JavaElementResourceMapping.java:184)
at org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.getTraversalRoots(CVSLightweightDecorator.java:261)
at org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.isSupervised(CVSLightweightDecorator.java:248)
at org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.decorate(CVSLightweightDecorator.java:209)
at org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.decorate(CVSLightweightDecorator.java:161)
at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:263)
at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:81)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:365)
at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:347)
at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:374)
at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:334)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)